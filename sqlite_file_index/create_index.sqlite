pragma journal_mode=wal;

drop table if exists files;
drop table if exists folders;
drop table if exists file_metadata;
drop table if exists folder_metadata;

create table folders (
	id integer primary key,
	path text,
	parent integer,
	constraint unique_path unique (path)
	foreign key (parent) references folders(id) on delete cascade
);

create table files (
	id integer primary key,
	path text,
	parent integer,
	constraint unique_path unique (path)
	foreign key (parent) references folders(id) on delete cascade
);

create table folder_metadata (
    id integer,
    foreign key (id) references folders(id) on delete cascade
);

create table file_metadata (
    id integer,
    foreign key (id) references files(id) on delete cascade
);
